<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
	<title><ui:insert name="title">Welcome To RideSharing</ui:insert>
	</title>
	<meta name="viewport" content="initial-scale=1.0" />
	<meta charset="utf-8" />
</h:head>
<h:body>
	
	<h:form method="post" id="loginForm">
		<h:commandButton
			style="text-decoration:none; padding:5px; width:100px; float:right;"
			value="Login" action="#{userController.goToLogin()}"
			class="btn btn-primary pull-right" id="Login"
			rendered="#{param.login!=1}" />
	</h:form>
	<script type="text/javascript">
		jQuery(function() {
			topBar.show()
		});
	</script>
	<p:notificationBar id="notbar" position="top" widgetVar="topBar"
		styleClass="top" rendered="#{param.login == 1}">
		<h:outputText
			value="Welcome, you are now logged in! #{profielController.getHuidigProfiel().login}"
			rendered="#{param.login == 1}" style="color:#FFCC00;font-size:15px;" />
	</p:notificationBar>
	<div class="jumbotron jumbotron-sm">
		<div class="container">
			<div class="row">
				<div class="col-sm-12 col-lg-12">
					<h1 class="h1">
						Welcome to the new and improved Ridesharing platform <small></small>
					</h1>
				</div>
			</div>
		</div>
	</div>
	<h2 class="h2">Hier komt dus die tabel met de gegevens in de db</h2>
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="well well-sm">
					<h:form method="post" id="filterRoutes">
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<p:outputLabel value="vertrekplaats" />
									<input required="required" id="vertrekAdress" type="text" />
		  						<h:inputHidden id="pleaseGodWork" value="#{routeController.queryVertrek}"/>
								</div>
								<div class="form-group">
									<p:outputLabel value="aankomstplaats" />
									<input required="required" id="aankomstAdress" type ="text">
		  						</input>
		  						<h:inputHidden id="pleaseGodWorkTOO" value="#{routeController.queryEinde}" />
								</div>
								<div class="form-group">
									<p:outputLabel value="vertrektijd" />
									<p:datePicker id="queryvertrektijd"
										value="#{routeController.queryVertrektijd}" showTime="true" />
								</div>
								<div class="form-group">
									<p:outputLabel value="aankomsttijd" />
									<p:datePicker id="queryaankomsttijd"
										value="#{routeController.queryEindetijd}" showTime="true" />
								</div>
								<div class="form-group">
									<p:commandButton
										style="text-decoration:none; padding:5px; width:115px;"
										process="@form" value="zoeken" id="filterRoute"
										class="btn btn-primary pull-right">
									</p:commandButton>
								</div>
							</div>
						</div>
					</h:form>
				</div>
			</div>
		</div>
	</div>
	<!-- 	<script type="text/javascript" language="javascript">
		$(document).ready(function() { /// Wait till page is loaded
			$("#FilterProfiel").click(function() {
				$('#herlaad').load(/G4Web/index.xhtml +  ' #herlaad');
			});
		});
	</script> -->

	<div id="herlaad">
		<h:outputLabel id="vertrek"
			value="vertrek: #{routeController.queryVertrek} aankomst: #{routeController.queryEinde} vertrektijd: #{routeController.queryVertrektijd} aankomsttijd: #{routeController.queryEindetijd}" />
		<h:dataTable id="routentable" value="#{routeController.getRoutes()}"
			var="route">
			<h:column>
				<f:facet name="header">
					<h:outputText value="Id" />
				</f:facet>
				<h:link outcome="viewRoute.xhtml?id=#{rit.id}"
					value="#{route.getId()}" />
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="beginpunt" />
				</f:facet>
				<h:outputText value="#{route.beginpunt}" />
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="eindpunt" />
				</f:facet>
				<h:outputText value="#{route.eindpunt}" />
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="vertrektijd" />
				</f:facet>
				<h:outputText value="#{route.vertrektijdToString()}" />
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="aankomsttijd" />
				</f:facet>
				<h:outputText value="#{route.eindtijdToString()}" />
			</h:column>
		</h:dataTable>
	</div>
	
	<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyAUI3IbCN38MjQJgCJptMXN4NluM7EdHns&amp;libraries=places,geometry&amp;callback=PlaceAutocompleteSearch&amp;fields=formatted_address" async="" defer=""></script>
<script>
  function PlaceAutocompleteSearch() {
	var options = {
			  types : ['address']
			};
	var componentForm = {
			  street_number: 'short_name',
			  route: 'long_name',
			  locality: 'long_name',
			  administrative_area_level_1: 'short_name',
			  country: 'long_name',
			  postal_code: 'short_name'
			};
    var input = document.getElementById('vertrekAdress');
    var input1 = document.getElementById('aankomstAdress');
    var autocomplete1= new google.maps.places.Autocomplete(input1, options);
    var autocomplete = new google.maps.places.Autocomplete(input, options);
    var place = autocomplete.getPlace();
    var place1 = autocomplete1.getPlace();
    autocomplete.addListener('place_changed', fillInAddress);
    autocomplete1.addListener('place_changed', fillInAddress1);
    document.getElementById('createRoute:pleaseGodWork').value = place.formatted_address;
    document.getElementById('createRoute:pleaseGodWorkTOO').value = place1.formatted_address;
    
    function fillInAddress() {
    	  // Get the place details from the autocomplete object.
    	  var place = autocomplete.getPlace();
    	

    	  document.getElementById('createRoute:pleaseGodWork').value = place.formatted_address;
    	  
    	}
    function fillInAddress1() {
  	  // Get the place details from the autocomplete object.
  	  
  	  var place1=autocomplete1.getPlace();

  	 
  	  document.getElementById('createRoute:pleaseGodWorkTOO').value = place1.formatted_address;
  	}
    
  }
</script>
</h:body>
</html>
