<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>

  <title>
    <ui:insert name="title">Route view</ui:insert>
  </title>
  <meta name="viewport" content="initial-scale=1.0" />
<meta charset="utf-8" />
 <style>
 .mapinv{
 display: none;
 }
 /* Always set the map height explicitly to define the size of the div
 * element that contains the map. */
#map {
  height: 100%;
  width: 100%;
}

.mapinv{
  display: none;
}


 </style>
<meta name="viewport" content="initial-scale=1.0" />
<meta charset="utf-8" />
<f:metadata>
		<f:viewParam name="route" value="#{routeController.route.id}" />
		<f:viewAction action="#{routeController.findRoute}" />
</f:metadata>
</h:head> 

<h:body> 

<div class="jumbotron jumbotron-sm">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-lg-12">
            	
                <h1 class="h1">
                    Route to: #{routeController.route.eindpunt} <small></small></h1>
                    
            </div>
        </div>
    </div>
</div>
<br />


	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="well well-sm" style="width:100%; height:100%;">
					<div style=" margin: 0 auto; width:600px; height:600px;" id="map"></div>
				</div>
			</div>
		</div>
	</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUI3IbCN38MjQJgCJptMXN4NluM7EdHns&amp;callback=initMap" async="" defer=""></script>
<script>
      function initMap() {
        var directionsService = new google.maps.DirectionsService;
        var directionsRenderer = new google.maps.DirectionsRenderer;
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 6,
          center: {lat: 51.051410, lng: 3.726115}
        });
        directionsRenderer.setMap(map);

      
          calculateAndDisplayRoute(directionsService, directionsRenderer);
       
      }

      function calculateAndDisplayRoute(directionsService, directionsRenderer) {
        var waypts = [];
        /* var checkboxArray = document.getElementById('waypoints');
        for (var i = 0; i &lt; checkboxArray.length; i++) {
          if (checkboxArray.options[i].selected) {
            waypts.push({
              location: checkboxArray[i].value,
              stopover: true
            });
          }
        } */

        directionsService.route({
          origin: "#{routeController.route.beginpunt}",
          destination: "#{routeController.route.eindpunt}",
          waypoints: waypts,
          optimizeWaypoints: true,
          travelMode: 'DRIVING'
        }, function(response, status) {
          if (status === 'OK') {
            directionsRenderer.setDirections(response);
            var route = response.routes[0];
            var summaryPanel = document.getElementById('directions-panel');
            summaryPanel.innerHTML = '';
            // For each route, display summary information.
            for (var i = 0; i &lt; route.legs.length; i++) {
              var routeSegment = i + 1;
              summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment +
                  '</b><br />';
              summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
              summaryPanel.innerHTML += route.legs[i].end_address + '<br />';
              summaryPanel.innerHTML += route.legs[i].distance.text + '<br /><br />';
            }
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }
    </script>

</h:body>
</html>
